<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">
    <link rel="icon" href="favicon.ico" type="image/x-icon">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="bootstrap.min.css">
    <script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML' async></script>
    <title>Shitcoin Price</title>
</head>
<body>
  <div class="container-fluid">
   <div class="row">
    <div class="col">
    </div>
    <div class="col-lg-6 col-md-8 col-sm-12 col-xs-12">
        <div class="jumbotron">
          <h3 class="display-4">Real Shitcoin Price!</h3>
            <p class="lead" id="intro"></p>
          <hr class="my-4">
          <p><strong>Here's how we do it:</strong></p>
          <p>\(rsp = {{c_{s}} \over c_{b}}\times {p_s \over p_b}\) <br /> <br />
             <i><b>where:</b></i> <br />
               \(rsp\) is the Real Shitcoin Price in USD<br />
               \(c_{s}\) is the number of coins (shitcoin) currently circulation<br />
               \(c_{b}\) is the current circulation of Bitcoin<br />
               \(p_s\) is the current price of the shitcoin in USD<br />
               \(p_s\) is the current price of Bitcoin in USD<br />
            </p>
          <div class="alert alert-warning">Now you can compare apples to apples instead of apples to watermelons!</div>
          <a href="https://github.com/gazhayes/shitcoinprice">Github</a> | <a href="https://twitter.com/gazhaze">Twitter</a>
         </div>
       <p>These prices are updated every hour.</p>
        <table id="coinData" class="table table-hover .w-auto">
      <thead>
        <tr>
          <th scope="col">Coin Name</th>
          <th scope="col">BSP</th>
          <th scope="col">RSP</th> 
    </tr>
      </thead>
    </table>
    </div>
    <div class="col">
   </div>
   </div>
        
     
      
  </div>
    <script>
        fetch('coins.json')
            .then(function (response) {
                return response.json();
            })
            .then(function (data) {
                appendData(data);
            })
            .catch(function (err) {
                console.log('error: ' + err);
            });
        function appendData(data) {
            var btcCirculation = data.data[0].circulating_supply;
            var btcPrice = data.data[0].quote.USD.price;
            var table = document.getElementById("coinData");
            var rowCount = 0;
            var introInjected = 0;
            var eth = 0;
            var eos = 0;
            for (var i = 0; i < data.data.length; i++) {
                if(data.data[i].name == "Ethereum"){
                   eth = data.data[i].quote.USD.price;
                };
                if(data.data[i].name == "EOS"){
                   eos = data.data[i].quote.USD.price;
                };
                if(introInjected == 0) {
                    if(eos != 0 && eth != 0){
                        injectIntro(eth, eos, btcCirculation);
                        introInjected = 1;
                    }
                };
                rowCount = i+1;
                var row = table.insertRow(i +1);
                var nameCell = row.insertCell(0);
                var bspCell = row.insertCell(1);
                var rspcCell = row.insertCell(2);
                nameCell.innerHTML = data.data[i].name + ' [' + data.data[i].symbol + ']';
                bspCell.innerHTML = ' $' + data.data[i].quote.USD.price.toFixed(2);
                rspcCell.innerHTML = ' $' + ((data.data[i].circulating_supply / btcCirculation) * data.data[i].quote.USD.price).toFixed(2);
                }
            var row = table.insertRow(rowCount + 1);
            var nameCell = row.insertCell(0);
            var bspCell = row.insertCell(1);
            var rspcCell = row.insertCell(2);
            nameCell.innerHTML = "JP Morgan Coin [JPM]";
            bspCell.innerHTML = ' $0'
            rspcCell.innerHTML = ' -$' + btcPrice;
        }
        function injectIntro(eth, eos, btcCirculation) {
            document.getElementById("intro").innerHTML = 'When you buy 1 BTC what you\'re really doing is buying 1/' + btcCirculation +
                ' (' + ((1 / btcCirculation) * 100).toFixed(8) + '%) of the total coin circulation.';
        };
    </script>
</body>
</html>
