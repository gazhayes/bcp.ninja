<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-115942873-3"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-115942873-3');
</script>


    <script src="https://cdn.jsdelivr.net/npm/js-cookie@2/src/js.cookie.min.js"></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="bootstrap.min.css">
    <title>Bitcoin Comparison Price</title>
</head>
<body>
  <div class="container-fluid">
   <div class="row">
    <div class="col">
    </div>
    <div class="col-lg-6 col-md-8 col-sm-12 col-xs-12">
        <h3 class="display-4">Bitcoin Comparison Price</h3>
        <div class="jumbotron" id="introduction">
            <p class="lead" id="intro"><img src="btc.gif" /></p>
            <p class="lead" id="intro2"></p>
            <p class="lead" id="intro3"></p>
          <hr class="my-4">

            <button type="button" class="btn btn-primary" id="close" onclick="toggleHelp()">Hide</button>
         </div>
       <p>These prices are updated every hour. Want to fix something? Send a pull request on <a href="https://github.com/gazhayes/bcp.ninja">Github</a>.
              Got comments, feedback, want me to add something? I'm also on <a href="https://twitter.com/gazhaze">Twitter</a>
              and publish a newsletter that you can sign up for <a href="https://docs.google.com/forms/d/e/1FAIpQLSc22lIXXPDn5jsy6cOFEI5s-Wj2YLMsA2HsPGzdOUwgnvpA9A/viewform?usp=sf_link">here</a>.</p>
        <button type="button" class="btn btn-primary btn-sm" id="help" onclick="toggleHelp()" style="display:none">Help</button>
        <table id="coinData" class="table table-hover .w-auto">
      <thead>
        <tr>
          <th scope="col">Coin Name</th>
          <th scope="col">Nominal</th>
          <th scope="col">BCP</th> 
    </tr>
      </thead>
    </table>
    </div>
    <div class="col">
   </div>
   </div>
        
     
      
  </div>
    <script>
        var eth = 0;
        var eos = 0;
        var eosbtc = 0;
        var ethbtc = 0;
        var btcCirculation = 0;
        fetch('coins.json')
            .then(function (response) {
                return response.json();
            })
            .then(function (data) {
                appendData(data);
            })
            .catch(function (err) {
                console.log('error: ' + err);
            });
        function appendData(data) {
            btcCirculation = data.data[0].circulating_supply;
            var btcPrice = data.data[0].quote.USD.price;
            var table = document.getElementById("coinData");
            var rowCount = 0;
            var introInjected = 0;
            for (var i = 0; i < data.data.length; i++) {
                if(data.data[i].name == "Ethereum"){
                   eth = data.data[i].quote.USD.price;
                   ethbtc = ((data.data[i].circulating_supply / btcCirculation) * data.data[i].quote.USD.price).toFixed(2);
                };
                if(data.data[i].name == "EOS"){
                   eos = data.data[i].quote.USD.price;
                   eosbtc = ((data.data[i].circulating_supply / btcCirculation) * data.data[i].quote.USD.price).toFixed(2);
                };
                if(introInjected == 0 && Cookies.get('helpDisplay') != 'false') {
                    if(eos != 0 && eth != 0){
                        injectIntro(eth, ethbtc, eos, eosbtc, btcCirculation);
                        introInjected = 1;
                    }
                };
                rowCount = i+1;
                var row = table.insertRow(i +1);
                var nameCell = row.insertCell(0);
                var bspCell = row.insertCell(1);
                var rspcCell = row.insertCell(2);
                nameCell.innerHTML = data.data[i].name + ' [' + data.data[i].symbol + ']';
                bspCell.innerHTML = ' $' + data.data[i].quote.USD.price.toFixed(2);
                rspcCell.innerHTML = ' $' + ((data.data[i].circulating_supply / btcCirculation) * data.data[i].quote.USD.price).toFixed(2);
                }
            var row = table.insertRow(rowCount + 1);
            var nameCell = row.insertCell(0);
            var bspCell = row.insertCell(1);
            var rspcCell = row.insertCell(2);
            nameCell.innerHTML = "JP Morgan Coin [JPM]";
            bspCell.innerHTML = ' $0'
            rspcCell.innerHTML = ' -$' + btcPrice.toFixed(2);
        }
        if(Cookies.get('helpDisplay') == 'false') {
            document.getElementById("introduction").style.display = "none";
            document.getElementById("help").style.display = "block";
        }
        function toggleHelp() {
          var x = document.getElementById("introduction");
          if (x.style.display === "none") {
            x.style.display = "block";
            document.getElementById("help").style.display = "none";
            Cookies.set('helpDisplay', 'true');
            injectIntro(eth, ethbtc, eos, eosbtc, btcCirculation);
          } else {
             x.style.display = "none";
             document.getElementById("help").style.display = "block";
             Cookies.set('helpDisplay', 'false');
            }}
        function injectIntro(eth, ethbtc, eos, eosbtc, btcCirculation) {
            document.getElementById("intro").innerHTML = 'When you buy 1 BTC what you\'re really doing is buying 1/' + btcCirculation +
                ' (' + ((1 / btcCirculation) * 100).toFixed(8) + '%) of the total coins in circulation on the network.';
            document.getElementById("intro2").innerHTML = 'Have you ever wondered what the same ' + ((1 / btcCirculation) * 100).toFixed(8) + '% ' + 
                'of the Ethereum or EOS network would cost in comparison? Well, it would cost you about $' + ethbtc + ' for Ethereum or $' + eosbtc + ' for EOS.';
            document.getElementById("intro3").innerHTML = 'Want to see the same comparison for other coins? Scroll down!';
        };
    </script>
</body>
</html>
